{% load static %}
<!DOCTYPE html>
 <html>
    <head>
        <meta charset="utf-8">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
          
        <title>HopeBloom</title>
        <meta content="" name="description">
        <meta content="" name="keywords">
          
            <!-- Favicons -->
        <link href="{% static  'assets/img/bloom-lg.png'%}" rel="icon">
        <link href="{% static  'assets/img/apple-touch-icon.png'%}" rel="apple-touch-icon">
          
            <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Roboto:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
          
            <!-- Vendor CSS Files -->
        <link href="{% static  'assets/vendor/aos/aos.css'%}" rel="stylesheet">
        <link href="{% static  'assets/vendor/bootstrap/css/bootstrap.min.css'%}" rel="stylesheet">
        <link href="{% static  'assets/vendor/bootstrap-icons/bootstrap-icons.css'%}" rel="stylesheet">
        <link href="{% static  'assets/vendor/boxicons/css/boxicons.min.css'%}" rel="stylesheet">
        <link href="{% static  'assets/vendor/glightbox/css/glightbox.min.css'%}" rel="stylesheet">
        <link href="{% static  'assets/vendor/swiper/swiper-bundle.min.css'%}" rel="stylesheet">
            
            <!-- Template Main CSS File -->
        <link rel="stylesheet" type="text/css" href="{% static  'assets/css/style.css' %}" >

        <style>
          /* Increase the size of the navbar icon */
          #navbar .nav-link i {
              font-size: 24px; /* Adjust the size as needed */
              margin-right: 5px; /* Optional: Add some spacing */
          }  
          .navbar {
              display: flex;
              justify-content: space-between;
              align-items: center;
              padding: 10px 20px;
          }
          .navbar-left, .navbar-center, .navbar-right {
              display: flex;
              align-items: center;
              list-style: none;
              margin: 0;
              padding: 0;
          }
          .navbar-left {
              margin-right: auto;
          }
          .navbar-center {
              margin: 0 auto;
          }
          .navbar-right {
              margin-left: auto;
          }
          .input-group {
            display: flex;
            align-items: center;
            margin-right: 10px;
            width: 80%;
          }
          
          .form-outline {
              display: flex;
              align-items: center;
              position: relative;
              flex: 1;
              max-width: 400px;
              margin: auto; 
          }
          
          .form-outline input[type="search"] {
              padding: 10px 15px;
              width: 50%;
              border: 1px solid transparent;
              border-radius: 30px 30px 30px 30px;
              color: #68889e;
              box-shadow: 0 0 1px rgba(93,119,143,255);
              outline: none;
              transition: all 0.3s ease-in-out;
              background: linear-gradient(to bottom, rgba(206,74,134,1), rgba(93,119,143,1));
              -webkit-background-clip: text;
              -webkit-text-fill-color: transparent; 
          }
          
          .form-outline input[type="search"]:focus {
            box-shadow: 0 0 5px rgba(21, 110, 162, 0.71);
            
          }
          
          .form-outline label {
              position: absolute;
              top: 50%;
              left: 15px;
              transform: translateY(-50%);
              pointer-events: none;
              transition: all 0.3s ease-in-out;
              background: linear-gradient(to bottom, rgba(206,74,134,1), rgba(93,119,143,1));
              -webkit-background-clip: text;
              -webkit-text-fill-color: transparent; 
              
          }
          
          .form-outline input[type="search"]:focus + .form-label {
              top: 0%;
              left: 10px;
              font-size: 12px;
              border-color:linear-gradient(to bottom, rgba(206, 74, 134, 1), rgba(93, 119, 143, 1));
          }
          
          .search-button-header {
              padding: 7px 10px;
              border: none;
              background: linear-gradient(to bottom,rgba(206,74,134,255),rgba(93,119,143,255));
              color: white;
              cursor: pointer;
              border-radius: 0 25px 25px 0;
              display: flex;
              align-items: center;
              justify-content: center;
              transition: background-color 0.3s ease-in-out;
              margin-left: -40px;
              position: relative;
              z-index: 1;
          }
          
          .search-button-header i {
              font-size: 20px;
          }
          
          .search-button-header:hover {
            background: linear-gradient(to bottom,rgba(93,119,143,255),rgba(206,74,134,255));
          }
          input[type="search"]::-webkit-search-cancel-button {
            -webkit-appearance: none;
            appearance: none;
          }
          
          .animate__animated.animate__fadeIn {
              animation-duration: 1s;
              animation-fill-mode: both;
          }
          .form-outline label.active {
            top: 0%;
            left: 20px;
            font-size: 12px;
          }
          /* Optionally, reduce padding and margin of the alert */
          #alert {
            padding-top: 0%; /* Adjust as needed */
            padding-bottom: 0%; /* Adjust as needed */
            margin-top: 0; /* Adjust as needed */
            margin-bottom: 0; /* Adjust as needed */
          } 
          #alert .alert {
          font-size: 16px; /* Adjust as needed */
          padding: 8px 15px; /* Adjust as needed */
          } 
        
      /* Increase the size of the navbar icon */
      #navbar .nav-link i {
          font-size: 24px; /* Adjust the size as needed */
          margin-right: 5px; /* Optional: Add some spacing */
      }         

      
      .publication-list {
        list-style: none;
        padding: 0;
        text-align: center; /* Center align the list */
     }

     .publication-item {
        display: inline-block;
        margin-bottom: 20px;
        width: 100%; /* Make each item take full width */
        max-width: 400px; /* Set a maximum width for each item */
        text-align: left; /* Align text to the left within each item */
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Optional: Add shadow */
        border-radius: 8px; /* Optional: Add rounded corners */
     }

     .publication-img {
        width: 100%;
        height: auto;
        border-top-left-radius: 8px;
        border-top-right-radius: 8px;
     }

     .publication-content {
        padding: 20px;
     }    
     
     .blog-grid {
         position: relative;
         box-shadow: 0 1rem 1.75rem 0 rgba(45, 55, 75, 0.1);
         height: 100%;
         border: 0.0625rem solid rgba(220, 224, 229, 0.6);
         border-radius: 0.25rem;
         transition: all .2s ease-in-out;
         height: 100%
     }
     
     .blog-grid span {
         color: #292dc2
     }
     
     .blog-grid img {
         width: 100%;
         border-top-left-radius: 0.25rem;
         border-top-right-radius: 0.25rem
     }
     
     .blog-grid-text {
         position: relative
     }
     
     .blog-grid-text>span {
         color: #292dc2;
         font-size: 13px;
         padding-right: 5px
     }
     
     .blog-grid-text h4 {
         line-height: normal;
         margin-bottom: 15px
     }
     
     .blog-grid-text .meta-style2 {
         border-top: 1px dashed #cee1f8;
         padding-top: 15px
     }
     
     .blog-grid-text .meta-style2 ul li {
         margin-bottom: 0;
         font-weight: 500
     }
     
     .blog-grid-text .meta-style2 ul li:last-child {
         margin-right: 0
     }
     
     .blog-grid-text ul {
         margin: 0;
         padding: 0
     }
     
     .blog-grid-text ul li {
         display: inline-block;
         font-size: 14px;
         font-weight: 500;
         margin: 5px 10px 5px 0
     }
     
     .blog-grid-text ul li:last-child {
         margin-right: 0
     }
     
     .blog-grid-text ul li i {
         font-size: 14px;
         font-weight: 600;
         margin-right: 5px
     }
     
     .blog-grid-text p {
         font-weight: 400;
         padding: 0
     }
     
     .blog-list-left-heading:after,
     .blog-title-box:after {
         content: '';
         height: 2px
     }
     
     .blog-grid-simple-content a:hover {
         color: #1d184a
     }
     
     .blog-grid-simple-content a:hover:after {
         color: #1d184a
     }
     .blog-grid-text {
         position: relative
     }
     
     .blog-grid-text>span {
         color: #292dc2;
         font-size: 13px;
         padding-right: 5px
     }
     
     .blog-grid-text h4 {
         line-height: normal;
         margin-bottom: 15px
     }
     
     .blog-grid-text .meta-style2 {
         border-top: 1px dashed #cee1f8 !important;
         padding-top: 15px
     }
     
     .blog-grid-text .meta-style2 ul li {
         margin-bottom: 0;
         font-weight: 500
     }
     
     .blog-grid-text .meta-style2 ul li:last-child {
         margin-right: 0
     }
     
     .blog-grid-text ul {
         margin: 0;
         padding: 0
     }
     
     .blog-grid-text ul li {
         display: inline-block;
         font-size: 14px;
         font-weight: 500;
         margin: 5px 10px 5px 0
     }
     
     .blog-grid-text ul li:last-child {
         margin-right: 0
     }
     
     .blog-grid-text ul li i {
         font-size: 14px;
         font-weight: 600;
         margin-right: 5px
     }
     
     .blog-grid-text p {
         font-weight: 400;
         padding: 0
     }
     
     a, a:active, a:focus {
         color: #575a7b;
         text-decoration: none;
         transition-timing-function: ease-in-out;
         -ms-transition-timing-function: ease-in-out;
         -moz-transition-timing-function: ease-in-out;
         -webkit-transition-timing-function: ease-in-out;
         -o-transition-timing-function: ease-in-out;
         transition-duration: .2s;
         -ms-transition-duration: .2s;
         -moz-transition-duration: .2s;
         -webkit-transition-duration: .2s;
         -o-transition-duration: .2s;
     }
     
     .pagination {
         border-radius: 0;
         padding: 0;
         margin: 0
     }
     
     .pagination ul {
         display: inline-block;
         *display: inline;
         *zoom: 1;
         margin: 0 auto;
         padding: 0
     }
     
     .pagination li {
         display: inline
     }
     
     .pagination a {
         float: left;
         padding: 0 18px;
         line-height: 40px;
         text-decoration: none;
         border: 1px solid #dbdbdb;
         border-left-width: 0;
         background: #fff
     }
     
     .pagination a:hover {
         background-color: #1d184a;
         color: #fff
     }
     
     .pagination .active a {
         background-color: #f7f7f7;
         color: #999;
         cursor: default
     }
     
     .pagination .disabled span {
         color: #999;
         background-color: transparent;
         cursor: default
     }
     
     .pagination .disabled a {
         color: #999;
         background-color: transparent;
         cursor: default
     }
     
     .pagination .disabled a:hover {
         color: #999;
         background-color: transparent;
         cursor: default
     }
     
     .pagination li:first-child a {
         border-left-width: 1px
     }
     
     .mt-6, .my-6 {
         margin-top: 3.5rem;
     }
          /* Increase the size of the navbar icon */
          #navbar .nav-link i {
              font-size: 24px; /* Adjust the size as needed */
              margin-right: 5px; /* Optional: Add some spacing */
          }         

          
          .publication-list {
            list-style: none;
            padding: 0;
            text-align: center; /* Center align the list */
         }
    
         .publication-item {
            display: inline-block;
            margin-bottom: 20px;
            width: 100%; /* Make each item take full width */
            max-width: 400px; /* Set a maximum width for each item */
            text-align: left; /* Align text to the left within each item */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Optional: Add shadow */
            border-radius: 8px; /* Optional: Add rounded corners */
         }
    
         .publication-img {
            width: 100%;
            height: auto;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
         }
    
         .publication-content {
            padding: 20px;
         }    
        
        
    </style>
    </head>
    <body>
      <section id="alert">
        {% if alert.is_active %}
          <div class="alert alert-danger text-center">
              <br><strong>Alert!</strong> The platform is currently in alert mode.
          </div>
        {% endif %}
      </section>     
      <header id="header" class="d-flex align-items-center">
          <div class="container d-flex align-items-center justify-content-between">
              <!-- Barre de recherche -->
              <div class="navbar-left">
              <div class="input-group animate__animated animate__fadeIn">
                <form method="get" action="{% url 'search' %}" class="form-outline">
                    <input id="search-input" name="query" type="search" class="form-control" />
                    <label class="form-label" for="search-input">Search <i class="bi bi-search"></i></label>
                   
                </form>
              </div>
              </div>
              <h1 class="logo navbar-center">
                <a href="/">
                  <img src="{% static 'assets/img/bloom.png' %}" alt="">
                    HopeBloom
                </a>
              </h1>
              <nav id="navbar" class="navbar navbar-right">
                <ul>                  
                  <li><a class="nav-link scrollto active" href="/">Home</a></li>
                  <li><a class="nav-link" href="{% url 'association_list' %}">Associations</a></li>
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Categories</a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                      <li><a class="dropdown-item" href="{%url 'Health' %}" >Healthcare</a></li>
                      <li><a class="dropdown-item" href="{%url 'Education' %}">Education</a></li>
                      <li><a class="dropdown-item" href="{%url 'Children' %}">Children</a></li>
                      <li><a class="dropdown-item" href="{%url 'Environment' %}">Environment</a></li>
                      <li><a class="dropdown-item" href="{%url 'Urgent' %}">Urgent</a></li>
                    </ul>   
                  </li>
                  {% if user.is_authenticated %}
                      {%if user.is_donor%}
                        <li><a class="nav-link" href="{% url 'dashboard_donor'%}"><i class="bi bi-person-circle"></i></a></li>
                        {%elif user.is_association%}
                          <li><a class="nav-link" href="{% url 'dashboard_association'%}"><i class="bi bi-person-circle"></i></a></li>
                        {%else%}
                          <li><a class="nav-link" href="{% url 'dashboardAdmin'%}"><i class="bi bi-person-circle"></i></a></li>
                        {% endif %}
                      {% else %}
                        <li><a class="nav-link" role="button" href="{%url 'DonorSignIn' %}">Log In</a></li>
                        <li class="nav-item dropdown">
                          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Sign up</a>
                          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="{% url 'DonorSignup' %}">As Donor</a></li>
                            <li><a class="dropdown-item" href="{% url 'AssociationSignup' %}">As Association</a></li>
                            <li><a class="dropdown-item" href="{% url 'signupadmin' %}">As Admin</a></li>
                          </ul>
                        </li>
                  {% endif%}
                </ul>           
                <i class="bi mobile-nav-toggle bi-list"></i>                                
              </nav>
          </div>
      </header>
        <main>
          {%  block content %}
              <br>
              <br>
              <br>
              <div class="container">
                {% if publications %}
                <div class="row mt-5">
                  {% for category in categories %}
                      {% if category.name == 'Urgent' %}
                          {% for publication in publications %}
                                {% if publication.category == category %}
                                <div class="col-md-6 col-lg-4">
                                  <div class="blog-grid wow fadeInUp" data-wow-delay=".2s" style="visibility: visible; animation-delay: 0.2s; animation-name: fadeInUp;">
                                      <div class="blog-grid-img position-relative">
                                          <img src="{{ publication.image.url }}" class="publication-img" alt="{{ publication.titre }}">
                                      </div>
                                      <div class="blog-grid-text p-4">
                                          <h3 class="h5 mb-3">{{ publication.titre }}</h3>
                                          <p class="display-30">{{ publication.contenu | truncatechars:150 }}</p>
                                          <div class="meta meta-style2">
                                              <div class="progress">
                                                  <div class="progress-bar" role="progressbar" style="width: {{ publication.progress_percent }}%; Background-color: #5d7990;" aria-valuenow="{{ publication.progress_percent }}" aria-valuemin="0" aria-valuemax="100">{{ publication.progress_percent }}%</div>
                                              </div>
                                              <ul>
                                                  <li><i class="fas fa-calendar-alt"></i> {{ publication.date|date:"d M, Y" }}</li>
                                              </ul>
                                          </div>
                                          <br>
                                          {% if publication.Montant_rest > 0 %}
                                              <div style="font-style: italic; text-decoration: underline;"><strong>Montant restant {{ publication.Montant_rest|floatformat:2 }}$</strong></div>
                                          {% else %}
                                              <div style="font-style: italic; text-decoration: underline;"><strong>Objectif atteint</strong></div>
                                          {% endif %}
                                          <br>
                                          {% if publication.Montant_rest > 0 %}                                      
                                              <a href="{% url 'faire_don' publication.id %}" class="btn btn-customs" style="Background-color: #5d7990; color: #ffffff">Faire un Don</a>
                                          {% endif %}
                                          <a href="{% url 'detail' publication.id %}" class="btn btn-customs" style="Background-color: #5d7990; color: #ffffff">Read More</a>
                                      </div>
                                  </div>
                              </div>
                                {% endif %}
                              {% endfor %}
                          {% endif %}
                    {% endfor %}
                            </div>
                {% else %}
                    <p>No publications found.</p>
               {% endif %}  
              </div>   
          {%  endblock content %}
      </main>
      <footer id="footer">
        <div class="footer-top">
          <div class="container">
            <div class="row">
              <div class="col-lg-3 col-md-6 footer-contact">
                <h3>  HopeBloom <span>.</span></h3>
                <p>
                  <strong>Phone:</strong> +212 611111111<br>
                  <strong>Email:</strong> hopeBloom@gmail.com<br>
                </p>
              </div>
              <div class="col-lg-3 col-md-6 footer-links">
                <h4>Useful Links</h4>
                <ul>
                  <li><i class="bx bx-chevron-right"></i> <a href="#">Home</a></li>
                  <li><i class="bx bx-chevron-right"></i> <a href="#">About us</a></li>
                  <li><i class="bx bx-chevron-right"></i> <a href="#">Categories</a></li>
                  <li><i class="bx bx-chevron-right"></i> <a href="#">Privacy policy</a></li>
                </ul>
              </div>
              <div class="col-lg-3 col-md-6 footer-links">
                <h4>Our Services</h4>
                <ul>
                  <!--<li><i class="bx bx-chevron-right"></i> <a href="#">  </a></li>-->
                  <li><i class="bx bx-chevron-right"></i> <a href="#"> !!coming soon!!  </a></li>
                </ul>
              </div>
              <div class="col-lg-3 col-md-6 footer-links">
                <h4>Our Social Networks</h4>
                <p>to keep up with us more </p>
                <div class="social-links mt-3">
                  <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
                  <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
                  <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="container py-4">
          <div class="copyright">
            &copy; Copyright <strong><span>HopeBloom</span></strong>. All Rights Reserved
          </div>
        </div>
      </footer><!-- End Footer -->
             
      <div id="preloader"></div>
      <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
    
    
        <!-- Vendor JS Files -->
        <script src="{% static 'assets/vendor/purecounter/purecounter_vanilla.js'%}"></script>
        <script src="{% static 'assets/vendor/aos/aos.js'%}"></script>
        <script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js'%}"></script>
        <script src="{% static 'assets/vendor/glightbox/js/glightbox.min.js'%}"></script>
        <script src="{% static 'assets/vendor/isotope-layout/isotope.pkgd.min.js'%}"></script>
        <script src="{% static 'assets/vendor/swiper/swiper-bundle.min.js'%}"></script>
        <script src="{% static 'assets/vendor/waypoints/noframework.waypoints.js'%}"></script>
        <script src="{% static 'assets/vendor/php-email-form/validate.js'%}"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"></script>
        <script>
          const searchButton = document.getElementById('search-button');
          const searchInput = document.getElementById('search-input');
          const searchGroup = document.querySelector('.input-group');
          const searchLabel = document.querySelector('.form-outline label');
    
          
          searchButton.addEventListener('click', (event) => {
              event.preventDefault();
              const inputValue = searchInput.value;
              if(inputValue.trim()) {
                  searchGroup.classList.add('animate__animated', 'animate__bounceOutUp');
                  setTimeout(() => {
                      document.querySelector('.form-outline').submit();
                  }, 10); // Delay to allow animation to complete
              }
          });
          searchInput.addEventListener('input', () => {
            if (searchInput.value.trim() !== '') {
                searchLabel.classList.add('active');
            } else {
                searchLabel.classList.remove('active');
            }
          });
        </script>
        
      
    
        <!-- Template Main JS File -->
        <script src="{% static 'assets/js/main.js'%}"></script>    
    </body>
</html>
    
